<div class="verification-wrapper">
  <div class="verification-card">
    <ng-container *ngIf="!isLoaded">
      <div class="loading-state">
        <div class="spinner"></div>
        <h2 class="loading-title">Đang xác minh tài khoản của bạn...</h2>
        <p class="loading-message">Vui lòng chờ trong giây lát.</p>
      </div>
    </ng-container>

    <ng-container *ngIf="isLoaded">
      <div [ngClass]="{'verification-success-state': isVerified, 'verification-error-state': !isVerified}" class="status-content">
        <ng-container *ngIf="isVerified">
          <div class="icon-circle success-circle">
            <i class="bi bi-check-circle-fill success-icon"></i>
          </div>
          <h2 class="status-title success-title">Xác minh thành công! 🎉</h2>
          <p class="status-message">Tài khoản của bạn đã được xác minh thành công.</p>
          <p class="redirect-message">Bạn sẽ được chuyển hướng đến trang đăng nhập trong <span class="countdown">{{ countdown }}</span> giây...</p>
          <button class="action-button primary-button" (click)="navigateToLogin()">Đăng nhập ngay</button>
        </ng-container>

        <ng-container *ngIf="!isVerified">
          <div class="icon-circle error-circle">
            <i class="bi bi-exclamation-triangle-fill error-icon"></i>
          </div>
          <h2 class="status-title error-title">Xác minh thất bại!</h2>
          <p class="status-message">{{ errorMessage }}</p>
          <p class="guidance-message">
            Vui lòng kiểm tra lại liên kết xác minh hoặc thử yêu cầu gửi lại email.
          </p>
          <div class="button-group">
            <button class="action-button secondary-button" (click)="requestResendEmail()">Gửi lại email xác minh</button>
            <a routerLink="/login" class="link-button">Quay lại trang Đăng nhập</a>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>