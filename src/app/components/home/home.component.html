<app-header (aiTuVanClicked)="onAiTuVanClicked()"></app-header>

<div class="main-section">
  <div class="background-elements">
    <div class="square green-square top-left"></div>
    <div class="square yellow-square bottom-right"></div>
    <div class="square green-square mid-left"></div>
    <div class="square yellow-square mid-right"></div>
    <div class="square green-square bottom-left-small"></div>
    <div class="square yellow-square top-right-small"></div>
  </div>

  <div class="content-wrapper">
    <div class="three-column-layout">
      <div class="left-column">
        <div class="robot-container">
          <img src="assets/img/chatai1.png" alt="AI Robot Vietnam" class="hero-robot-image">
          <div class="robot-glow"></div>
          <div class="floating-elements">
            <div class="security-badge">
              <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 5 L30 10 L30 25 Q30 30 20 32 Q10 30 10 25 L10 10 Z" fill="#FF6B35" opacity="0.8"/>
                <path d="M15 20 L18 23 L25 16" stroke="white" stroke-width="2" fill="none"/>
              </svg>
            </div>
            <div class="ai-chip">
              <span>AI</span>
            </div>
            <div class="vietnam-star">
              <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 2 L18 11 L27 11 L20 17 L23 26 L15 20 L7 26 L10 17 L3 11 L12 11 Z" fill="#FFD700"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="center-column">
        <div class="main-content">
          <h1 class="main-title">SƒÉn Ng∆∞·ªùi X·∫•u, Di·ªát K·∫ª Gian</h1>
          <!-- <p class="secondary-title"></p> -->
          <p class="subtitle">B·∫£o v·ªá b·∫°n kh·ªèi s·ªë ƒëi·ªán tho·∫°i, t√†i kho·∫£n ng√¢n h√†ng v√† website ƒë·ªôc h·∫°i.</p>

          <div class="search-box-container" [class.loading]="isLoading">
            <div class="search-robot" (click)="onRobotClick()" title="Ch√†o b·∫°n üëâüëà">
              <div class="robot-eyes"></div>
              <div class="robot-legs"></div>
            </div>
            <div class="search-robot-trail"></div>
            <div class="search-robot-trail"></div>
            <div class="search-robot-trail"></div>
            
            <div class="search-type-buttons">
              <button class="type-btn" 
                      [class.active]="selectedType === 1"
                      (click)="selectSearchType(1)"
                      [disabled]="isLoading">
                <i class="fas fa-mobile-alt"></i>
                <span>S·ªë ƒëi·ªán tho·∫°i</span>
              </button>
              
              <button class="type-btn" 
                      [class.active]="selectedType === 2"
                      (click)="selectSearchType(2)"
                      [disabled]="isLoading">
                <i class="fas fa-university"></i>
                <span>S·ªë t√†i kho·∫£n</span>
              </button>
              
              <button class="type-btn" 
                      [class.active]="selectedType === 3"
                      (click)="selectSearchType(3)"
                      [disabled]="isLoading">
                <i class="fas fa-globe"></i>
                <span>URL/Website</span>
              </button>
            </div>
            
            <div class="search-input-group">
              <input class="search-input" type="text" [placeholder]="getSearchPlaceholder()"
                [(ngModel)]="info" (keydown.enter)="sendMessage()" [disabled]="isLoading">
              <button class="search-button" type="submit" (click)="sendMessage()" [disabled]="!info.trim() || isLoading">
                <i [class]="currentSearchIcon"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="right-column">
        <div class="activity-log-widget">
          <app-activity-widget></app-activity-widget>
        </div>
      </div>
    </div>
  </div>

  <div class="result-section" *ngIf="searchResult && !isLoading">
    <div class="result-header">
      <h2>K·∫øt Qu·∫£ Tra C·ª©u cho: <span class="highlight-info">{{ searchResult.info }}</span></h2>
      <span class="status-tag" [class.status-safe]="searchResult.reportDescription !== 'Th√¥ng tin b√°o c√°o li√™n quan ƒë√£ ƒë∆∞·ª£c t√¨m th·∫•y.'" [class.status-scam]="searchResult.reportDescription === 'Th√¥ng tin b√°o c√°o li√™n quan ƒë√£ ƒë∆∞·ª£c t√¨m th·∫•y.'">
        {{ searchResult.reportDescription }}
      </span>
    </div>

    <div class="result-details">
      <p><strong>Lo·∫°i:</strong> {{ selectedType === 1 ? 'S·ªë ƒëi·ªán tho·∫°i' : selectedType === 2 ? 'S·ªë t√†i kho·∫£n' : 'URL' }}</p>
      <p *ngIf="searchResult.description"><strong>M√¥ t·∫£:</strong> {{ searchResult.description }}</p>
      <p *ngIf="searchResult.moneyScam && searchResult.moneyScam !== '0'"><strong>S·ªë ti·ªÅn b·ªã l·ª´a:</strong> {{ searchResult.moneyScam | currency:'VND':'symbol':'1.0-0':'vi' }}</p>
      <p *ngIf="searchResult.verifiedCount"><strong>S·ªë l∆∞·ª£t b√°o c√°o:</strong> {{ searchResult.verifiedCount }}</p>
      <p *ngIf="searchResult.lastReportAt && searchResult.lastReportAt !== '0001-01-01T00:00:00'"><strong>B√°o c√°o g·∫ßn nh·∫•t:</strong> {{ searchResult.lastReportAt | date:'dd/MM/yyyy HH:mm' }}</p>

      <div class="analysis-section" *ngIf="searchResult.analysis">
        <h3>Ph√¢n t√≠ch chi ti·∫øt:</h3>
        <div class="analysis-content" [innerHTML]="searchResult.analysis"></div>
      </div>

      <div class="evidence-section" *ngIf="searchResult.evidenceUrls && searchResult.evidenceUrls.length > 0">
        <h3>B·∫±ng ch·ª©ng:</h3>
        <div class="evidence-gallery">
          <img *ngFor="let url of searchResult.evidenceUrls" [src]="'https://your-domain.com' + url" alt="B·∫±ng ch·ª©ng" class="evidence-thumbnail">
          </div>
      </div>
    </div>
    <button class="clear-result-button" (click)="searchResult = null; errorMessage = null;">X√≥a k·∫øt qu·∫£</button>
  </div>

  <div class="top-searched-with-banners" *ngIf="!isLoading">
    <!-- Banner 1 - B√™n tr√°i -->
    <iframe src="/assets/components/banner/banner1.html" 
            width="160" 
            height="600" 
            frameborder="0" 
            scrolling="no"
            class="left-banner">
    </iframe>
    
    <div class="top-searched-section-new">
      <div class="section-header">
        <h2 class="section-title">üîç TOP 10 ƒê·ªêI T∆Ø·ª¢NG B·ªä TRA C·ª®U NHI·ªÄU NH·∫§T</h2>
        <p class="section-subtitle">Nh·ªØng ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c c·ªông ƒë·ªìng ki·ªÉm tra th∆∞·ªùng xuy√™n nh·∫•t</p>
      </div>

      <div class="tab-navigation">
        <button class="tab-button" [class.active]="activeTab === 'phone'" (click)="setActiveTab('phone')">
          <i class="fas fa-mobile-alt"></i>
          S·ªë ƒëi·ªán tho·∫°i
        </button>
        <button class="tab-button" [class.active]="activeTab === 'bank'" (click)="setActiveTab('bank')">
          <i class="fas fa-university"></i>
          T√†i kho·∫£n ng√¢n h√†ng
        </button>
        <button class="tab-button" [class.active]="activeTab === 'url'" (click)="setActiveTab('url')">
          <i class="fas fa-globe"></i>
          Website
        </button>
      </div>

      <div class="tab-content-container">
        
        <div class="tab-content" *ngIf="activeTab === 'phone'">
          <h3 class="tab-title"><i class="fas fa-mobile-alt"></i> Top 10 S·ªë ƒëi·ªán tho·∫°i</h3>
          
          <div class="loading-state" *ngIf="isLoadingTopData">
            <div class="spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
          
          <div class="error-state" *ngIf="topDataError && !isLoadingTopData">
            <p class="error-message">{{ topDataError }}</p>
            <button class="retry-button" (click)="loadTopScamData()">ƒê·ªìng b·ªô l·∫°i</button>
          </div>
          
          <div class="ranking-list" *ngIf="!isLoadingTopData && !topDataError">
            <div class="ranking-item" *ngFor="let item of getPhoneNumbers(); let i = index" 
                 [class.danger]="item.status === 'danger'"
                 [class.warning]="item.status === 'warning'"
                 [class.safe]="item.status === 'safe'"
                 (click)="onItemClick(item)"
                 [style.cursor]="'pointer'">
              <div class="rank-number">
                <span class="rank">{{ i + 1 }}</span>
              </div>
              <div class="item-info">
                <div class="item-value">{{ item.info }}</div>
              </div>
              <div class="item-description">
                <span class="description-text">{{ item.description }}</span>
              </div>
              <div class="search-stats">
                <div class="search-count">{{ item.viewCount | number }}</div>
                <div class="search-label">l∆∞·ª£t tra c·ª©u</div>
              </div>
            </div>
            
            <div class="empty-state" *ngIf="getPhoneNumbers().length === 0">
              <p>Kh√¥ng c√≥ d·ªØ li·ªáu s·ªë ƒëi·ªán tho·∫°i</p>
            </div>
          </div>
        </div>

        <div class="tab-content" *ngIf="activeTab === 'bank'">
          <h3 class="tab-title"><i class="fas fa-university"></i> Top 10 T√†i kho·∫£n ng√¢n h√†ng</h3>
          
          <div class="loading-state" *ngIf="isLoadingTopData">
            <div class="spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
          
          <div class="error-state" *ngIf="topDataError && !isLoadingTopData">
            <p class="error-message">{{ topDataError }}</p>
            <button class="retry-button" (click)="loadTopScamData()">ƒê·ªìng b·ªô l·∫°i</button>
          </div>
          
          <div class="ranking-list" *ngIf="!isLoadingTopData && !topDataError">
            <div class="ranking-item" *ngFor="let item of getBankAccounts(); let i = index" 
                 [class.danger]="item.status === 'danger'"
                 [class.warning]="item.status === 'warning'"
                 [class.safe]="item.status === 'safe'"
                 (click)="onItemClick(item)"
                 [style.cursor]="'pointer'">
              <div class="rank-number">
                <span class="rank">{{ i + 1 }}</span>
              </div>
              <div class="item-info">
                <div class="item-value">{{ item.info }}</div>
              </div>
              <div class="item-description">
                <span class="description-text">{{ item.description }}</span>
              </div>
              <div class="search-stats">
                <div class="search-count">{{ item.viewCount | number }}</div>
                <div class="search-label">l∆∞·ª£t tra c·ª©u</div>
              </div>
            </div>
            
            <div class="empty-state" *ngIf="getBankAccounts().length === 0">
              <p>Kh√¥ng c√≥ d·ªØ li·ªáu t√†i kho·∫£n ng√¢n h√†ng</p>
            </div>
          </div>
        </div>

        <div class="tab-content" *ngIf="activeTab === 'url'">
          <h3 class="tab-title"><i class="fas fa-globe"></i> Top 10 Website</h3>
          
          <div class="loading-state" *ngIf="isLoadingTopData">
            <div class="spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
          
          <div class="error-state" *ngIf="topDataError && !isLoadingTopData">
            <p class="error-message">{{ topDataError }}</p>
            <button class="retry-button" (click)="loadTopScamData()">ƒê·ªìng b·ªô l·∫°i</button>
          </div>
          
          <div class="ranking-list" *ngIf="!isLoadingTopData && !topDataError">
            <div class="ranking-item" *ngFor="let item of getWebsites(); let i = index" 
                 [class.danger]="item.status === 'danger'"
                 [class.warning]="item.status === 'warning'"
                 [class.safe]="item.status === 'safe'"
                 (click)="onItemClick(item)"
                 [style.cursor]="'pointer'">
              <div class="rank-number">
                <span class="rank">{{ i + 1 }}</span>
              </div>
              <div class="item-info">
                <div class="item-value">{{ item.info }}</div>
              </div>
              <div class="item-description">
                <span class="description-text">{{ item.description }}</span>
              </div>
              <div class="search-stats">
                <div class="search-count">{{ item.viewCount | number }}</div>
                <div class="search-label">l∆∞·ª£t tra c·ª©u</div>
              </div>
            </div>
            
            <div class="empty-state" *ngIf="getWebsites().length === 0">
              <p>Kh√¥ng c√≥ d·ªØ li·ªáu website</p>
            </div>
          </div>
        </div>
      </div>

      <div class="section-footer">
        <p class="update-note">üìä D·ªØ li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t li√™n t·ª•c h√†ng gi·ªù| ‚ö†Ô∏è Th√¥ng tin ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o</p>
      </div>
    </div>
    
    <!-- Banner 2 - B√™n ph·∫£i -->
    <iframe src="/assets/components/banner/banner2.html" 
            width="160" 
            height="600" 
            frameborder="0" 
            scrolling="no"
            class="right-banner">
    </iframe>
  </div>
</div>

<div class="features-section" *ngIf="!isLoading">
  <div class="container">
    <div class="section-header">
      <p class="section-label">T√çNH NƒÇNG</p>
      <h2 class="section-main-title">B·∫£o v·ªá to√†n di·ªán kh·ªèi l·ª´a ƒë·∫£o</h2>
    </div>

    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aiweb2.png" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">Ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i</h3>
        <p class="feature-description">X√°c minh danh t√≠nh ng∆∞·ªùi g·ªçi, ph√°t hi·ªán c√°c s·ªë ƒëi·ªán tho·∫°i l·ª´a ƒë·∫£o ƒë√£ ƒë∆∞·ª£c b√°o c√°o b·ªüi c·ªông ƒë·ªìng.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aistk.jpg" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">X√°c th·ª±c t√†i kho·∫£n ng√¢n h√†ng</h3>
        <p class="feature-description">Ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa s·ªë t√†i kho·∫£n ng√¢n h√†ng tr∆∞·ªõc khi th·ª±c hi·ªán giao d·ªãch chuy·ªÉn ti·ªÅn.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aisdt1.jpg" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">Qu√©t website an to√†n</h3>
        <p class="feature-description">Ph√¢n t√≠ch website ƒë·ªÉ ph√°t hi·ªán c√°c trang web gi·∫£ m·∫°o, l·ª´a ƒë·∫£o ho·∫∑c ch·ª©a m√£ ƒë·ªôc.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aisdt.jpg" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">AI T∆∞ v·∫•n th√¥ng minh</h3>
        <p class="feature-description">Chatbot AI h·ªó tr·ª£ 24/7, t∆∞ v·∫•n v√† gi·∫£i ƒë√°p c√°c th·∫Øc m·∫Øc v·ªÅ an to√†n th√¥ng tin.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aicsdl.jpg" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">C∆° s·ªü d·ªØ li·ªáu c·∫≠p nh·∫≠t</h3>
        <p class="feature-description">D·ªØ li·ªáu l·ª´a ƒë·∫£o ƒë∆∞·ª£c c·∫≠p nh·∫≠t li√™n t·ª•c t·ª´ c√°c ngu·ªìn uy t√≠n v√† b√°o c√°o t·ª´ c·ªông ƒë·ªìng.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <img src="../../../assets/img/aiwarning.jpg" alt="H√¨nh ·∫£nh AI ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i" width="50" height="50">
        </div>
        <h3 class="feature-title">C·∫£nh b√°o th·ªùi gian th·ª±c</h3>
        <p class="feature-description">Nh·∫≠n th√¥ng b√°o ngay l·∫≠p t·ª©c khi ph√°t hi·ªán c√°c m·ªëi ƒëe d·ªça m·ªõi ho·∫∑c chi√™u tr√≤ l·ª´a ƒë·∫£o.</p>
      </div>
    </div>
  </div>
</div>

<div class="about-us-section" *ngIf="!isLoading">
  <div class="container">
    <div class="about-us-content">
      <div class="text-column">
        <h2 class="section-main-title">INTERNET AN TO√ÄN<br> CHO NG∆Ø·ªúI VI·ªÜT</h2>
        <p class="section-description">
          T·∫°i AI6, ch√∫ng t√¥i t·ª± h√†o l√† gi·∫£i ph√°p h√†ng ƒë·∫ßu, ti√™n phong trong s·ª© m·ªánh b·∫£o v·ªá c·ªông ƒë·ªìng tr·ª±c tuy·∫øn t·∫°i Vi·ªát Nam. B·∫±ng vi·ªác ·ª©ng d·ª•ng c√¥ng ngh·ªá AI v∆∞·ª£t tr·ªôi c√πng kho d·ªØ li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t kh√¥ng ng·ª´ng, ch√∫ng t√¥i mang ƒë·∫øn s·ª± an to√†n to√†n di·ªán, gi√∫p ng∆∞·ªùi d√πng an t√¢m kh√°m ph√° kh√¥ng gian m·∫°ng.
        </p>
        <a routerLink="/about-us" class="btn-about-us">
          Xem th√™m v·ªÅ ch√∫ng t√¥i
          <span class="arrow-icon">‚Üí</span>
        </a>
      </div>
      <div class="graphic-column">
      <img src="assets/img/robot.png" alt="Robot AI" class="about-us-robot-image" style="width: 320px !important; height: 320px !important; border-radius: 50% !important; object-fit: cover !important; box-shadow: 0 8px 32px rgba(255, 107, 53, 0.3) !important; max-width: 320px !important; max-height: 320px !important;">
      </div>
      
    </div>
  </div>
</div>

<app-chat-box *ngIf="showChatbox && !isLoading" (close)="closeChatbox()"></app-chat-box>
<app-footer *ngIf="!isLoading"></app-footer>